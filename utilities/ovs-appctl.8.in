.\" -*- nroff -*-
.de IQ
.  br
.  ns
.  IP "\\$1"
..
.TH ovs\-appctl 8 "April 2009" "Open vSwitch" "Open vSwitch Manual"
.ds PN ovs\-appctl

.SH NAME
ovs\-appctl \- utility for configuring running Open vSwitch daemons

.SH SYNOPSIS
\fBovs\-appctl\fR [\fB-h\fR | \fB--help\fR] [\fItarget\fR...] [\fIaction\fR...]
.sp 1
The available \fItarget\fR options are:
.br
[\fB-t\fR \fIsocket\fR | \fB--target=\fIsocket\fR]
.sp 1
The available \fIaction\fR options are:
.br
[\fB-l\fR | \fB--list\fR] [\fB-s\fR
\fImodule\fR[\fB:\fIfacility\fR[\fB:\fIlevel\fR]] |
\fB--set=\fImodule\fR[\fB:\fIfacility\fR[\fB:\fIlevel\fR]]]
[\fB-r\fR | \fB--reopen\fR]
[\fB-e\fR | \fB--execute=\fIcommand\fR]

.SH DESCRIPTION
The \fBovs\-appctl\fR program connects to one or more running
Open vSwitch daemons (such as \fBovs\-vswitchd\fR(8)), as specified by the
user, and sends them commands to query or modify their behavior.
Its primary purpose is currently to adjust daemons' logging levels.

\fBovs\-appctl\fR applies one or more actions to each of one or more
target processes.  Targets may be specified using:

.IP "\fB-t \fIsocket\fR"
.IQ "\fB--target=\fIsocket\fR"
The specified \fIsocket\fR must be the name of a Unix domain socket
for a \fBovs\-appctl\fR-controllable process.  If \fIsocket\fR does not
begin with \fB/\fR, it is treated as relative to \fB@RUNDIR@\fR.

Each Open vSwitch daemon by default creates a socket named
\fB@RUNDIR@/\fIprogram\fB.\fIpid\fB.ctl\fR, where \fIprogram\fR is
the program's name (such as \fBovs\-vswitchd\fR) and \fIpid\fR is the
daemon's PID.

.PP
The available actions are:

.IP "\fB-l\fR"
.IQ "\fB--list\fR"
Print the list of known logging modules and their current levels to
stdout.

.IP "\fB-s\fR \fImodule\fR[\fB:\fIfacility\fR[\fB:\fIlevel\fR]]"
.IQ "\fB--set=\fImodule\fR[\fB:\fIfacility\fR[\fB:\fIlevel\fR]]"

Sets the logging level for \fImodule\fR in \fIfacility\fR to
\fIlevel\fR.  The \fImodule\fR may be any valid module name (as
displayed by the \fB--list\fR option) or the special name \fBANY\fR to
set the logging levels for all modules.  The \fIfacility\fR may be
\fBsyslog\fR or \fBconsole\fR to set the levels for logging to the
system log or to the console, respectively, or \fBANY\fR to set the
logging levels for both facilities.  If it is omitted,
\fIfacility\fR defaults to \fBANY\fR.  The \fIlevel\fR must be one of
\fBemer\fR, \fBerr\fR, \fBwarn\fR, \fBinfo\fR, or \fBdbg\fR, designating the
minimum severity of a message for it to be logged.  If it is omitted,
\fIlevel\fR defaults to \fBdbg\fR.

.IP "\fB-s PATTERN:\fIfacility\fB:\fIpattern\fR"
.IQ "\fB--set=PATTERN:\fIfacility\fB:\fIpattern\fR"

Sets the log pattern for \fIfacility\fR to \fIpattern\fR.  Each time a
message is logged to \fIfacility\fR, \fIpattern\fR determines the
message's formatting.  Most characters in \fIpattern\fR are copied
literally to the log, but special escapes beginning with \fB%\fR are
expanded as follows:

.RS
.IP \fB%A\fR
The name of the application logging the message, e.g. \fBsecchan\fR.

.IP \fB%c\fR
The name of the module (as shown by \fBovs\-appctl --list\fR) logging
the message.

.IP \fB%d\fR
The current date and time in ISO 8601 format (YYYY-MM-DD HH:MM:SS).

.IP \fB%d{\fIformat\fB}\fR
The current date and time in the specified \fIformat\fR, which takes
the same format as the \fItemplate\fR argument to \fBstrftime\fR(3).

.IP \fB%m\fR
The message being logged.

.IP \fB%N\fR
A serial number for this message within this run of the program, as a
decimal number.  The first message a program logs has serial number 1,
the second one has serial number 2, and so on.

.IP \fB%n\fR
A new-line.

.IP \fB%p\fR
The level at which the message is logged, e.g. \fBDBG\fR.

.IP \fB%P\fR
The program's process ID (pid), as a decimal number.

.IP \fB%r\fR
The number of milliseconds elapsed from the start of the application
to the time the message was logged.

.IP \fB%%\fR
A literal \fB%\fR.
.RE

.IP
A few options may appear between the \fB%\fR and the format specifier
character, in this order:

.RS
.IP \fB-\fR
Left justify the escape's expansion within its field width.  Right
justification is the default.

.IP \fB0\fR
Pad the field to the field width with \fB0\fRs.  Padding with spaces
is the default.

.IP \fIwidth\fR
A number specifies the minimum field width.  If the escape expands to
fewer characters than \fIwidth\fR then it is padded to fill the field
width.  (A field wider than \fIwidth\fR is not truncated to fit.)
.RE

.IP
The default pattern for console output is \fB%d{%b %d
%H:%M:%S}|%05N|%c|%p|%m\fR; for syslog output, \fB%05N|%c|%p|%m\fR.

.IP \fB-r\fR
.IQ \fB--reopen\fR
Causes the target application to close and reopen its log file.  (This
is useful after rotating log files, to cause a new log file to be
used.)

This has no effect if the target application was not invoked with the
\fB--log-file\fR option.

.IP "\fB-e \fIcommand\fR"
.IQ "\fB--execute=\fIcommand\fR"
Passes the specified \fIcommand\fR literally to the target application
and prints its response to stdout, if successful, or to stderr if an
error occurs.  Use \fB-e help\fR to print a list of available commands.

.SH OPTIONS

.so lib/common.man

.SH "SEE ALSO"

.BR ovs\-controller (8),
.BR ovs\-dpctl (8),
.BR secchan (8)
